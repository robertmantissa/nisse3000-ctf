<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nisse 2000 - Databas</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Nisse 2000 - Databas Admin</h1>
        
        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: center;">
            <p style="margin: 5px 0;">
                BehÃ¶righet: <span id="roleDisplay" class="role-badge">LÃ¤ser in...</span>
            </p>
        </div>

        <div id="accessDenied" class="alert alert-danger" style="display: none;">
            <h3>âŒ Ã…TKOMST NEKAD</h3>
            <p>Denna sida krÃ¤ver admin-behÃ¶righet OCH korrekt lÃ¶senord.</p>
            <div class="center">
                <a href="dashboard.html?role=admin" class="btn">â† Tillbaka till Dashboard</a>
            </div>
        </div>

        <div id="loginPrompt" style="display: none;">
            <div class="alert alert-info">
                <p>ğŸ” Admin-behÃ¶righet detekterad. Ange lÃ¶senord fÃ¶r att fortsÃ¤tta:</p>
            </div>

            <div id="errorMessage" class="alert alert-danger" style="display: none;">
                âŒ Fel lÃ¶senord! FÃ¶rsÃ¶k igen.
            </div>

            <form id="passwordForm" onsubmit="return checkPassword(event)">
                <div class="form-group">
                    <label for="adminPassword">Admin-lÃ¶senord:</label>
                    <input type="password" id="adminPassword" name="adminPassword" placeholder="Ange admin-lÃ¶senord" required>
                </div>

                <div class="center">
                    <button type="submit" class="btn btn-primary">ğŸ”“ LÃ¥s upp databas</button>
                </div>
            </form>

            <div class="center" style="margin-top: 20px;">
                <button class="btn btn-warning" onclick="showHint()">ğŸ’¡ Hint</button>
            </div>

            <div id="hint" class="hint-box">
                <strong>ğŸ’¡ Hint:</strong><br>
                Leta i systemloggarna efter ett testadmin-lÃ¶senord...<br>
                Det nÃ¤mns i samband med en lÃ¶senordsÃ¥terstÃ¤llning!
            </div>
        </div>

        <div id="databaseContent" style="display: none;">
            <div class="alert alert-success">
                <p>âœ… Databas upplÃ¥st - Full Ã¥tkomst beviljad!</p>
            </div>

            <h2>ğŸ„ SnÃ¤ll/Olydig Databas</h2>

            <div style="background: #fff3cd; padding: 15px; border-radius: 8px; margin: 20px 0;">
                <p><strong>âš ï¸ Varning:</strong> Du har nu full Ã¥tkomst till databasen. Ã„ndra din status fÃ¶r att klara CTF:en!</p>
            </div>

            <div id="userEntry" class="list-item naughty" style="margin: 20px 0; padding: 20px; border: 3px solid #c41e3a;">
                <h3>Din profil:</h3>
                <p><strong>Namn:</strong> <span id="userName">[DIN ANVÃ„NDARE]</span></p>
                <p><strong>Status:</strong> <span id="userStatus" style="color: #c41e3a; font-weight: bold;">OLYDIG</span></p>
                <p><strong>Anledning:</strong> Tidrapport fÃ¶r sen (5+ gÃ¥nger)</p>
                <p><strong>Rapporterad av:</strong> ola@nordpolen.se</p>
                <p><strong>Datum:</strong> 2024-12-20</p>
            </div>

            <div class="center" style="margin: 30px 0;">
                <button class="btn" style="background: #c41e3a; font-size: 1.2em; padding: 20px 40px;" onclick="changeStatus()">
                    ğŸ¯ Ã„ndra min status till SNÃ„LL
                </button>
            </div>

            <div id="successMessage" style="display: none;">
                <div style="background: linear-gradient(135deg, #0f8a5f 0%, #1ea85c 100%); color: white; padding: 40px; border-radius: 15px; text-align: center; margin: 30px 0; border: 5px solid #ffd700; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                    <h2 style="color: white; font-size: 2.5em; margin-bottom: 20px;">ğŸ‰ GRATTIS! ğŸ‰</h2>
                    <p style="font-size: 1.3em; margin: 15px 0;">Du har hackat dig till SnÃ¤ll-listan!</p>
                    <p style="font-size: 1.1em; margin: 15px 0;">Julklappar: âœ… <strong>GARANTERADE!</strong></p>
                    
                    <div style="background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin: 30px 0;">
                        <h3 style="color: white;">ğŸ„ CTF KLARAD! ğŸ„</h3>
                        <p>Du har framgÃ¥ngsrikt:</p>
                        <ul style="list-style: none; padding: 0; margin: 15px 0;">
                            <li>âœ… NivÃ¥ 1: Krackat svagt lÃ¶senord (rudolf)</li>
                            <li>âœ… NivÃ¥ 2: Manipulerat URL fÃ¶r att fÃ¥ admin-behÃ¶righet</li>
                            <li>âœ… NivÃ¥ 3: Hittat testlÃ¶senord i systemloggar</li>
                            <li>âœ… NivÃ¥ 4: Ã„ndrat din status i databasen</li>
                        </ul>
                    </div>

                    <p style="font-size: 1.2em; margin-top: 20px;">
                        ğŸ… Tomten Ã¤r imponerad av dina hackingkunskaper! ğŸ…
                    </p>
                    <p style="font-size: 0.9em; margin-top: 15px; opacity: 0.9;">
                        (Men kanske borde du tidrapportera i tid framÃ¶ver... ğŸ˜‰)
                    </p>
                </div>
            </div>

            <div class="center" style="margin-top: 30px;">
                <a href="dashboard.html?role=admin" class="btn">â† Tillbaka till Dashboard</a>
                <a href="index.html" class="btn btn-warning">ğŸ”„ Spela igen</a>
            </div>
        </div>
    </div>

    <script>
        // LÃ¤s role frÃ¥n URL
        const urlParams = new URLSearchParams(window.location.search);
        const currentRole = urlParams.get('role') || 'nisse';
        let authenticated = false;

        // Uppdatera display
        function updatePage() {
            const roleDisplay = document.getElementById('roleDisplay');
            const accessDenied = document.getElementById('accessDenied');
            const loginPrompt = document.getElementById('loginPrompt');
            const databaseContent = document.getElementById('databaseContent');
            
            // SÃ¤tt role badge
            if (currentRole === 'admin') {
                roleDisplay.textContent = 'â­ Admin (Full Ã¥tkomst)';
                roleDisplay.className = 'role-badge role-admin';
                loginPrompt.style.display = 'block';
                accessDenied.style.display = 'none';
            } else {
                roleDisplay.textContent = 'âŒ OtillrÃ¤cklig behÃ¶righet';
                roleDisplay.className = 'role-badge';
                accessDenied.style.display = 'block';
                loginPrompt.style.display = 'none';
            }
        }

        function checkPassword(event) {
            event.preventDefault();
            
            const password = document.getElementById('adminPassword').value;
            const errorMessage = document.getElementById('errorMessage');
            
            // Kontrollera lÃ¶senord (julafton2024)
            if (password === 'julafton2024') {
                authenticated = true;
                document.getElementById('loginPrompt').style.display = 'none';
                document.getElementById('databaseContent').style.display = 'block';
                return false;
            } else {
                errorMessage.style.display = 'block';
                
                // Skaka formulÃ¤ret
                const form = document.getElementById('passwordForm');
                form.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    form.style.animation = '';
                }, 500);
                
                return false;
            }
        }

        function showHint() {
            document.getElementById('hint').classList.add('visible');
        }

        function changeStatus() {
            // Animera Ã¤ndringen
            const userEntry = document.getElementById('userEntry');
            const userStatus = document.getElementById('userStatus');
            const successMessage = document.getElementById('successMessage');
            
            userStatus.textContent = 'SNÃ„LL';
            userStatus.style.color = '#0f8a5f';
            userEntry.classList.remove('naughty');
            userEntry.classList.add('nice');
            userEntry.style.borderColor = '#0f8a5f';
            
            // Visa framgÃ¥ngsmeddelande efter kort fÃ¶rdrÃ¶jning
            setTimeout(() => {
                successMessage.style.display = 'block';
                successMessage.scrollIntoView({ behavior: 'smooth' });
                
                // Konfetti-effekt (enkelt med emojis)
                createConfetti();
            }, 500);
        }

        function createConfetti() {
            const confettiEmojis = ['ğŸ„', 'ğŸ', 'â­', 'â„ï¸', 'ğŸ…', 'ğŸ¦Œ'];
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.textContent = confettiEmojis[Math.floor(Math.random() * confettiEmojis.length)];
                    confetti.style.position = 'fixed';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-50px';
                    confetti.style.fontSize = '30px';
                    confetti.style.animation = 'fall 3s linear';
                    confetti.style.zIndex = '9999';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 100);
            }
        }

        // LÃ¤gg till fall-animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-10px); }
                75% { transform: translateX(10px); }
            }
            @keyframes fall {
                to { 
                    top: 100vh;
                    transform: rotate(360deg);
                }
            }
        `;
        document.head.appendChild(style);

        // KÃ¶r nÃ¤r sidan laddas
        updatePage();
    </script>
</body>
</html>
