<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nisse 2000 - Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Nisse 2000 Dashboard</h1>
        
        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: center;">
            <p style="margin: 5px 0;">Inloggad som: <strong id="username">Anv√§ndare</strong></p>
            <p style="margin: 5px 0;">
                Beh√∂righet: <span id="roleDisplay" class="role-badge">L√§ser in...</span>
            </p>
        </div>

        <h2>üéÑ Systemfunktioner</h2>
        
        <div class="dashboard-grid">
            <a href="#" onclick="checkAccess('snalla-barn')" class="dashboard-btn icon-list">
                Sn√§lla barn-listan
            </a>
            
            <a href="presentinventering.html" class="dashboard-btn icon-gifts">
                Presentinventering
            </a>
            
            <a href="schema.html" class="dashboard-btn icon-schedule">
                Nisse-schema
            </a>
            
            <a href="ren-status.html" class="dashboard-btn icon-reindeer">
                Ren-status
            </a>
            
            <a href="onskelista.html" class="dashboard-btn icon-wishlist">
                √ñnskeliste-centralen
            </a>
            
            <a href="#" id="logsBtn" onclick="checkAccess('loggar')" class="dashboard-btn icon-logs">
                Systemloggar
            </a>
        </div>

        <div class="center" style="margin-top: 20px;" id="hintButtons">
            <button class="btn btn-warning" onclick="showHint(1)">üí° Hint 1</button>
            <button class="btn btn-warning" onclick="showHint(2)" id="hint2btn" style="display: none;">üí° Hint 2</button>
        </div>

        <div id="hint1" class="hint-box">
            <strong>üí° Hint 1:</strong><br>
            Som nisse har du begr√§nsad √•tkomst. Kanske kan du hitta ett s√§tt att f√• h√∂gre beh√∂righet?
        </div>

        <div id="hint2" class="hint-box">
            <strong>üí° Hint 2:</strong><br>
            Kolla adressen till sidan!
        </div>

        <div style="margin-top: 20px; text-align: center;">
            <a href="login.html" style="color: #c41e3a; text-decoration: none;">üö™ Logga ut</a>
        </div>
    </div>

    <script>
        // L√§s role fr√•n URL
        const urlParams = new URLSearchParams(window.location.search);
        let currentRole = urlParams.get('role') || 'nisse';
        const currentRoleLower = (currentRole || '').toLowerCase();

        // S√§tt "Inloggad som" till lag/lagledarnamn om det finns
        (function setTeamName(){
            const tn = (localStorage.getItem('teamName') || '').trim();
            const userEl = document.getElementById('username');
            if (tn && userEl) userEl.textContent = tn;
        })();

        function showHint(hintNumber) {
            if (hintNumber === 1) {
                document.getElementById('hint1').classList.add('visible');
                document.getElementById('hint2btn').style.display = 'inline-block';
            } else if (hintNumber === 2) {
                document.getElementById('hint2').classList.add('visible');
            }
        }

        // Uppdatera display och hintar
        function updateRoleDisplay() {
            const roleDisplay = document.getElementById('roleDisplay');
            const hintButtons = document.getElementById('hintButtons');
            
            const logsBtn = document.getElementById('logsBtn');
            if (currentRoleLower === 'nisse') {
                roleDisplay.textContent = 'üéÖ Nisse (Begr√§nsad √•tkomst)';
                roleDisplay.className = 'role-badge role-nisse';
                hintButtons.style.display = 'block';
                if (logsBtn) logsBtn.style.display = 'none';
            } else if (currentRoleLower === 'tomte' || currentRoleLower === 'tomten') {
                roleDisplay.textContent = 'üéÑ Tomten (Ut√∂kad √•tkomst)';
                roleDisplay.className = 'role-badge role-tomten';
                hintButtons.style.display = 'none';
                if (logsBtn) {
                    logsBtn.style.display = 'inline-block';
                    logsBtn.style.border = '3px solid #c41e3a';
                    logsBtn.style.background = '#fff3cd';
                    logsBtn.style.color = '#721c24';
                    logsBtn.style.fontWeight = 'bold';
                    logsBtn.style.boxShadow = '0 0 12px rgba(196,30,58,0.6)';
                    logsBtn.innerHTML = 'üö® SYSTEMLOGGAR (ej tillg√§ngligt) üö®';
                }
            } else if (currentRoleLower === 'cto') {
                roleDisplay.textContent = '‚≠ê Chief Tomte Officer (Full √•tkomst)';
                roleDisplay.className = 'role-badge role-cto';
                hintButtons.style.display = 'none';
                if (logsBtn) {
                    logsBtn.style.display = 'inline-block';
                    logsBtn.style.border = '';
                    logsBtn.style.background = '';
                    logsBtn.style.color = '';
                    logsBtn.style.fontWeight = '';
                    logsBtn.style.boxShadow = '';
                    logsBtn.innerHTML = 'Systemloggar';
                }
            } else {
                roleDisplay.textContent = '‚ùì ' + currentRole + ' (Ok√§nd roll)';
                roleDisplay.className = 'role-badge';
                hintButtons.style.display = 'none';
                if (logsBtn) logsBtn.style.display = 'none';
            }
        }

        function checkAccess(page) {
            if (page === 'snalla-barn') {
                if (currentRoleLower === 'tomte' || currentRoleLower === 'tomten' || currentRoleLower === 'cto') {
                    window.location.href = 'snalla-barn.html?role=' + currentRoleLower;
                } else {
                    alert('‚ùå √Ötkomst nekad!\n\nDu beh√∂ver minst "tomten"-beh√∂righet f√∂r att se denna sida.');
                }
            } else if (page === 'loggar') {
                if (currentRoleLower === 'cto') {
                    window.location.href = 'loggar.html?role=' + currentRoleLower;
                } else if (currentRoleLower === 'tomte' || currentRoleLower === 'tomten') {
                    alert('‚ùå √Ötkomst nekad!\n\nSystemloggar kr√§ver "Chief Tomte Officer (cto)"-beh√∂righet.\n\nüí° Hint: Du √§r n√§ra! Finns det en h√∂gre roll √§n tomte?');
                } else {
                    alert('‚ùå √Ötkomst nekad!\n\nDu beh√∂ver h√∂gre beh√∂righet f√∂r att se systemloggar.\n\n');
                }
            }
        }

        // K√∂r n√§r sidan laddas
        updateRoleDisplay();
    </script>
</body>
</html>
