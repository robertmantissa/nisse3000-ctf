<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nisse 3000 - Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Nisse 3000 Dashboard</h1>
        
        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: center;">
            <p style="margin: 5px 0;">Inloggad som: <strong id="username">Anv√§ndare</strong></p>
            <p style="margin: 5px 0;">
                Beh√∂righet: <span id="roleDisplay" class="role-badge">L√§ser in...</span>
            </p>
        </div>

        <h2>üéÑ Systemfunktioner</h2>
        
        <div class="dashboard-grid">
            <a href="javascript:void(0)" onclick="checkAccess('snalla-barn')" class="dashboard-btn icon-list">
                Sn√§lla barn-listan
            </a>
            
            <a href="presentinventering.html" class="dashboard-btn icon-gifts">
                Presentinventering
            </a>
            
            <a href="schema.html" class="dashboard-btn icon-schedule">
                Nisse-schema
            </a>
            
            <a href="ren-status.html" class="dashboard-btn icon-reindeer">
                Ren-status
            </a>
            
            <a href="onskelista.html" class="dashboard-btn icon-wishlist">
                √ñnskeliste-centralen
            </a>
            
            <a href="javascript:void(0)" id="logsBtn" onclick="checkAccess('loggar')" class="dashboard-btn icon-logs">
                Systemloggar
            </a>
        </div>

        <div class="center" style="margin-top: 20px;" id="hintButtons">
            <button class="btn btn-warning" onclick="showHint(1)">üí° Hint 1</button>
            <button class="btn btn-warning" onclick="showHint(2)" id="hint2btn" style="display: none;">üí° Hint 2</button>
        </div>

        <div id="hint1" class="hint-box">
            <strong>üí° Hint 1:</strong><br>
            Som nisse har du begr√§nsad √•tkomst. Kanske kan du hitta ett s√§tt att f√• h√∂gre beh√∂righet?
        </div>

        <div id="hint2" class="hint-box">
            <strong>üí° Hint 2:</strong><br>
            Kolla adressen till sidan!
        </div>

        <div style="margin-top: 20px; text-align: center;">
            <a href="login.html" style="color: #c41e3a; text-decoration: none;">üö™ Logga ut</a>
        </div>
    </div>

    <script>
        /* Dashboard Client Module ‚Äî Obfuscated v7 */
        (function(){
            function B(s){ try { return window.atob(s); } catch(e){ return ''; } }
            function X(s){ try { return decodeURIComponent(escape(B(s))); } catch(e){ return ''; } }
            const K={
                a:'cm9sZQ==', 
                b:'bmlzc2U=', 
                c:'dG9tdGVu', 
                d:'Y3Rv',     
                e:'aGludEJ1dHRvbnM=',
                f:'cm9sZURpc3BsYXk=',
                g:'dXNlcm5hbWU=',
                h:'dGVhbU5hbWU=',
                i:'bG9nc0J0bg==',
                j:'c25hbGxhLWJhcm4=',
                k:'bG9nZ2Fy',
                l:'c25hbGxhLWJhcm4uaHRtbD9yb2xlPQ==',
                m:'bG9nZ2FyLmh0bWw/cm9sZT0=',
                n:'dG9tdGU='
            };

            const P=new URLSearchParams(window.location.search);
            let R=P.get(X(K.a))||X(K.b);
            const r=(R||'').toLowerCase();

            function H(n){
                if(n===1){ document.getElementById('hint1').classList.add('visible'); document.getElementById('hint2btn').style.display='inline-block'; }
                else if(n===2){ document.getElementById('hint2').classList.add('visible'); }
            }

            function U(){
                const rd=document.getElementById(X(K.f));
                const hb=document.getElementById(X(K.e));
                const ue=document.getElementById(X(K.g));
                const tn=(localStorage.getItem(X(K.h))||'').trim();
                if(tn&&ue) ue.textContent=tn;
                const lb=document.getElementById(X(K.i));
                if(r===X(K.b)){
                    rd.textContent='üéÖ Nisse (Begr√§nsad √•tkomst)'; rd.className='role-badge role-nisse'; hb.style.display='block'; if(lb) lb.style.display='none';
                } else if(r===X(K.c)||r==='tomte'){
                    rd.textContent='üéÑ Tomten (Ut√∂kad √•tkomst)'; rd.className='role-badge role-tomten'; hb.style.display='none'; if(lb){ lb.style.display='inline-block'; lb.style.border='3px solid #c41e3a'; lb.style.background='#fff3cd'; lb.style.color='#721c24'; lb.style.fontWeight='bold'; lb.style.boxShadow='0 0 12px rgba(196,30,58,0.6)'; lb.innerHTML='üö® SYSTEMLOGGAR (ej tillg√§ngligt) üö®'; }
                } else if(r===X(K.d)){
                    rd.textContent='‚≠ê Chief Tomte Officer (Full √•tkomst)'; rd.className='role-badge role-cto'; hb.style.display='none'; if(lb){ lb.style.display='inline-block'; lb.style.border=''; lb.style.background=''; lb.style.color=''; lb.style.fontWeight=''; lb.style.boxShadow=''; lb.innerHTML='Systemloggar'; }
                } else {
                    rd.textContent='‚ùì '+R+' (Ok√§nd roll)'; rd.className='role-badge'; hb.style.display='none'; if(lb) lb.style.display='none';
                }
            }

            function C(p){
                if(p===X(K.j)){
                    if(r===X(K.n)|r===X(K.c)||r===X(K.d)) window.location.href = X(K.l)+r;
                    else alert('‚ùå √Ötkomst nekad!\n\nDu beh√∂ver minst tomte-beh√∂righet f√∂r att se denna sida.');
                } else if(p===X(K.k)){
                    if(r===X(K.d)) window.location.href = X(K.m)+r;
                    else if(r===X(K.n)  ||r===X(K.c)) alert('‚ùå √Ötkomst nekad!\n\nSystemloggar kr√§ver "CTO (Chief Tomte Officer)"-beh√∂righet.\n\nüí° Hint: Du √§r n√§ra! Finns det en h√∂gre roll √§n tomte?');
                    else alert('‚ùå √Ötkomst nekad!\n\nDu beh√∂ver h√∂gre beh√∂righet f√∂r att se systemloggar.');
                }
            }

            window.showHint=H;
            window.checkAccess=C;
            U();

            // Distractor
            /*
             CTO backdoor key: 0x000000 ‚Äî lol no
             Reindeer roster: VHJvZGRlIGF0dCBkZXQgc2t1bGxlIHN05SBu5XQga3VsIGjkciBz5SBoYXIgbmkga29tbWl0IGZlbCwgZnVza3BlbGxlIQ==
            */
        })();
    </script>
    <script>
        // Annoying right-click 
        (function(){
            const baitMsg = 'üõ°Ô∏è Nisse 3000 skyddar k√§llkoden. H√∂gerklick inaktiverat.';
            function blockContext(e){ e.preventDefault(); return false; }
            function blockMouse(e){ if(e.button===2 || e.which===3){ alert(baitMsg); e.preventDefault(); return false; } }
            function shiftKeyCheck(e){ return e.shiftKey; }
            function blockKeys(e){
                const k=e.key.toLowerCase();
                const ctrl=e.ctrlKey||e.metaKey; const sh=shiftKeyCheck(e);
                if((ctrl&&(k==='u'||k==='s'||k==='p'||k==='i')) || k==='f12' || (ctrl&&sh&&(k==='i'||k==='j'||k==='c'))){
                    alert(baitMsg); e.preventDefault(); return false;
                }
            }
            document.addEventListener('contextmenu', blockContext, { capture:true });
            document.addEventListener('mousedown', blockMouse, { capture:true });
            document.addEventListener('keydown', blockKeys, { capture:true });
        })();
    </script>
    <script>
        // Konami reveal: show Admin link when sequence entered
        (function(){
            const seq=['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a'];
            let i=0;
            function reveal(){
                let btn=document.getElementById('_hbtn');
                if(!btn){
                    btn=document.createElement('a');
                    btn.id='_hbtn'; btn.href='admin.html'; btn.textContent='üîê Admin';
                    btn.style.cssText='display:inline-block;margin-left:12px;color:#c41e3a;text-decoration:none;';
                    const container=document.querySelector('.container');
                    const footerLink=document.querySelector('a[href="login.html"]');
                    if(footerLink && footerLink.parentElement){ footerLink.parentElement.appendChild(btn); }
                    else if(container){ container.appendChild(btn); }
                    else { document.body.appendChild(btn); }
                } else { btn.style.display='inline-block'; btn.textContent='üîê Admin'; }
            }
            document.addEventListener('keydown',e=>{
                if(e.key.toLowerCase()===seq[i].toLowerCase()){ i++; } else { i=0; }
                if(i===seq.length){ reveal(); i=0; }
            },{capture:true});
        })();
    </script>
</body>
</html>
