<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nisse 3000 - Systemloggar</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Systemloggar</h1>
        
        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: center;">
            <p style="margin: 5px 0;">
                Beh√∂righet: <span id="roleDisplay" class="role-badge">L√§ser in...</span>
            </p>
        </div>

        <div id="accessDenied" class="alert alert-danger" style="display: none;">
            <h3>‚ùå √ÖTKOMST NEKAD</h3>
            <p>Denna sida kr√§ver Chief Tomte Officer-beh√∂righet. Din nuvarande roll har inte tillr√§cklig √•tkomst.</p>
            <div class="center">
                <a href="dashboard.html?role=nisse" class="btn">‚Üê Tillbaka till Dashboard</a>
            </div>
        </div>

        <div id="logContent" style="display: none;">
            <div class="alert alert-success">
                <p>‚úÖ √Ötkomst beviljad - Chief Tomte Officer-beh√∂righet verifierad</p>
            </div>

            <h2>üìä Nisse 3000 Systemloggar</h2>

            <div class="log-box">
<pre>
[2025-12-05 08:15:23] SYSTEM START - Nisse 3000 v1.0
[2025-12-05 08:15:24] Database connected: naughty_nice_list.db
[2025-12-05 08:15:25] Loading user profiles...
[2025-12-05 08:15:26] Loaded 1,847,293 profiles

[2025-12-05 09:32:11] API CONNECTION ATTEMPT FROM ZACCO DYNAMICS- SUCCESS
[2025-12-05 09:32:45] USER ACTION - ola added entry to naughty list
[2025-12-05 09:32:46] NAUGHTY LIST UPDATE:
                      Name: <span id="teamNameInLogs">[DIN ANV√ÑNDARE]</span>
                      Reason: Tidrapport f√∂r sen (5+ g√•nger)
                      Reported by: Ola
                      Status: OLYDIG
[2025-12-05 09:33:01] LOGOUT - ola

[2025-12-05 12:45:33] ADMIN NOTE: Database backup scheduled f√∂r 24 Dec 00:00
                      
[2025-12-05 14:22:19] WARNING: Failed login attempt - incorrect password
[2025-12-05 14:22:31] WARNING: Failed login attempt - incorrect password  
[2025-12-05 14:22:44] WARNING: Failed login attempt - incorrect password

[2025-12-05 16:08:12] MAINTENANCE: Security patch applied (CVE-2024-XMAS)
[2025-12-05 16:08:13] NOTE: Direct database access still available at:
                      /database.html?role=cto

[2025-12-05 17:45:34] ADMIN NOTE: Password reset for test account
                      New password: julfest2025
                    
                      
[2025-12-05 18:30:45] BACKUP COMPLETE - naughty_nice_list_20241220.bak
[2025-12-05 18:30:46] SYSTEM STATUS: All systems operational
[2025-12-05 18:30:47] Active sessions: 3
[2025-12-05 18:30:48] Pending gift assignments: 1,847,293

[2024-12-22 10:15:00] CRITICAL: Julafton n√§rmar sig!
[2024-12-22 10:15:01] STATUS: 24 timmar kvar till leverans
[2024-12-22 10:15:02] Sn√§lla barn: 1,845,123
[2024-12-22 10:15:03] Olydiga barn: 2,170 (inklusive dig!)

[2024-12-22 11:45:33] LOGIN ATTEMPT - User: nisse - SUCCESS
[2024-12-22 11:46:01] USER ACTION - nisse checked weather conditions
[2024-12-22 11:47:12] LOGOUT - nisse
</pre>
            </div>

            <div class="center" style="margin-top: 20px;">
                <button class="btn btn-warning" onclick="showHint(1)">üí° Hint 1</button>
                <button class="btn btn-warning" onclick="showHint(2)" id="hint2btn" style="display: none;">üí° Hint 2</button>
            </div>

            <div id="hint1" class="hint-box">
                <strong>üí° Hint 1:</strong><br>
                Leta i loggarna efter direkta URL:er eller v√§gar till databasen.
            </div>

            <div id="hint2" class="hint-box">
                <strong>üí° Hint 2:</strong><br>
                Ett testl√∂senord har √•terst√§llts i en ADMIN NOTE. L√§s noga.
            </div>

            <div class="center" style="margin-top: 30px;">
                <a href="dashboard.html?role=cto" class="btn">‚Üê Tillbaka till Dashboard</a>
            </div>
        </div>
    </div>

    <script>
        let hintsShown = 0;

        function showHint(hintNumber) {
            if (hintNumber === 1) {
                document.getElementById('hint1').classList.add('visible');
                document.getElementById('hint2btn').style.display = 'inline-block';
                hintsShown = 1;
            } else if (hintNumber === 2) {
                document.getElementById('hint2').classList.add('visible');
                hintsShown = 2;
            }
        }
        // L√§s role fr√•n URL
        const urlParams = new URLSearchParams(window.location.search);
        const currentRole = urlParams.get('role') || 'nisse';

        // Uppdatera display
        function updatePage() {
            const roleDisplay = document.getElementById('roleDisplay');
            const accessDenied = document.getElementById('accessDenied');
            const logContent = document.getElementById('logContent');
            
            // S√§tt role badge
            if (currentRole === 'cto') {
                roleDisplay.textContent = '‚≠ê Chief Tomte Officer (Full √•tkomst)';
                roleDisplay.className = 'role-badge role-cto';
                logContent.style.display = 'block';
                accessDenied.style.display = 'none';
            } else if (currentRole === 'tomten') {
                roleDisplay.textContent = 'üéÑ Tomten (Ut√∂kad √•tkomst)';
                roleDisplay.className = 'role-badge role-tomten';
                accessDenied.style.display = 'block';
                logContent.style.display = 'none';
            } else {
                roleDisplay.textContent = 'üéÖ Nisse (Begr√§nsad √•tkomst)';
                roleDisplay.className = 'role-badge role-nisse';
                accessDenied.style.display = 'block';
                logContent.style.display = 'none';
            }
        }

        // S√§tt team-namn i loggraden
        (function setTeamName(){
            const tn = (localStorage.getItem('teamName') || '').trim();
            const el = document.getElementById('teamNameInLogs');
            if (tn && el) el.textContent = tn;
        })();

        // K√∂r n√§r sidan laddas
        updatePage();
    </script>
</body>
</html>
